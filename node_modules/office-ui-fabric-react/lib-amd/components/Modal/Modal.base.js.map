{"version":3,"file":"Modal.base.js","sourceRoot":"../src/","sources":["components/Modal/Modal.base.tsx"],"names":[],"mappings":"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","sourcesContent":["import * as React from 'react';\nimport { BaseComponent, classNamesFunction, getId, allowScrollOnElement, KeyCodes } from '../../Utilities';\nimport { FocusTrapZone, IFocusTrapZone } from '../FocusTrapZone/index';\nimport { animationDuration } from './Modal.styles';\nimport { IModalProps, IModalStyleProps, IModalStyles, IModal } from './Modal.types';\nimport { Overlay } from '../../Overlay';\nimport { ILayerProps, Layer } from '../../Layer';\nimport { Popup } from '../Popup/index';\nimport { withResponsiveMode, ResponsiveMode } from '../../utilities/decorators/withResponsiveMode';\nimport { DirectionalHint } from '../Callout/index';\nimport { Icon } from '../Icon/index';\nimport { DraggableZone, IDragData } from '../../utilities/DraggableZone/index';\n\n// @TODO - need to change this to a panel whenever the breakpoint is under medium (verify the spec)\n\nconst DefaultLayerProps: ILayerProps = {\n  eventBubblingEnabled: false\n};\n\nexport interface IDialogState {\n  isOpen?: boolean;\n  isVisible?: boolean;\n  isVisibleClose?: boolean;\n  id?: string;\n  hasBeenOpened?: boolean;\n  modalRectangleTop?: number;\n  isModalMenuOpen?: boolean;\n  isInKeyboardMoveMode?: boolean;\n  x: number;\n  y: number;\n}\n\nconst getClassNames = classNamesFunction<IModalStyleProps, IModalStyles>();\n\n@withResponsiveMode\nexport class ModalBase extends BaseComponent<IModalProps, IDialogState> implements IModal {\n  public static defaultProps: IModalProps = {\n    isOpen: false,\n    isDarkOverlay: true,\n    isBlocking: false,\n    className: '',\n    containerClassName: ''\n  };\n\n  private _onModalCloseTimer: number;\n  private _focusTrapZone = React.createRef<IFocusTrapZone>();\n  private _scrollableContent: HTMLDivElement | null;\n  private _lastSetX: number;\n  private _lastSetY: number;\n\n  constructor(props: IModalProps) {\n    super(props);\n    this.state = {\n      id: getId('Modal'),\n      isOpen: props.isOpen,\n      isVisible: props.isOpen,\n      hasBeenOpened: props.isOpen,\n      x: 0,\n      y: 0\n    };\n\n    this._lastSetX = 0;\n    this._lastSetY = 0;\n\n    this._warnDeprecations({\n      onLayerDidMount: 'layerProps.onLayerDidMount'\n    });\n  }\n\n  // tslint:disable-next-line function-name\n  public UNSAFE_componentWillReceiveProps(newProps: IModalProps): void {\n    clearTimeout(this._onModalCloseTimer);\n\n    // Opening the dialog\n    if (newProps.isOpen) {\n      if (!this.state.isOpen) {\n        // First Open\n        this.setState({\n          isOpen: true\n        });\n      } else {\n        // Modal has been opened\n        // Reopen during closing\n        this.setState({\n          hasBeenOpened: true,\n          isVisible: true\n        });\n\n        if (newProps.topOffsetFixed) {\n          const dialogMain = document.getElementsByClassName('ms-Dialog-main');\n          let modalRectangle;\n          if (dialogMain.length > 0) {\n            modalRectangle = dialogMain[0].getBoundingClientRect();\n            this.setState({\n              modalRectangleTop: modalRectangle.top\n            });\n          }\n        }\n      }\n    }\n\n    // Closing the dialog\n    if (!newProps.isOpen && this.state.isOpen) {\n      this._onModalCloseTimer = this._async.setTimeout(this._onModalClose, parseFloat(animationDuration) * 1000);\n      this.setState({\n        isVisible: false\n      });\n    }\n  }\n\n  public componentDidUpdate(prevProps: IModalProps, prevState: IDialogState) {\n    if (!prevProps.isOpen && !prevState.isVisible) {\n      this.setState({\n        isVisible: true\n      });\n    }\n  }\n\n  public render(): JSX.Element | null {\n    const {\n      className,\n      containerClassName,\n      scrollableContentClassName,\n      elementToFocusOnDismiss,\n      firstFocusableSelector,\n      forceFocusInsideTrap,\n      ignoreExternalFocusing,\n      isBlocking,\n      isClickableOutsideFocusTrap,\n      isDarkOverlay,\n      onDismiss,\n      layerProps,\n      overlay,\n      responsiveMode,\n      titleAriaId,\n      styles,\n      subtitleAriaId,\n      theme,\n      topOffsetFixed,\n      onLayerDidMount,\n      isModeless,\n      dragOptions\n    } = this.props;\n    const { isOpen, isVisible, hasBeenOpened, modalRectangleTop, x, y, isInKeyboardMoveMode } = this.state;\n\n    if (!isOpen) {\n      return null;\n    }\n\n    const layerClassName = layerProps === undefined ? '' : layerProps.className;\n\n    const classNames = getClassNames(styles, {\n      theme: theme!,\n      className,\n      containerClassName,\n      scrollableContentClassName,\n      isOpen,\n      isVisible,\n      hasBeenOpened,\n      modalRectangleTop,\n      topOffsetFixed,\n      isModeless,\n      layerClassName,\n      isDefaultDragHandle: dragOptions && !dragOptions.dragHandleSelector\n    });\n\n    const mergedLayerProps = {\n      ...DefaultLayerProps,\n      ...this.props.layerProps,\n      onLayerDidMount: layerProps && layerProps.onLayerDidMount ? layerProps.onLayerDidMount : onLayerDidMount,\n      insertFirst: isModeless,\n      className: classNames.layer\n    };\n    const modalContent = (\n      <FocusTrapZone\n        componentRef={this._focusTrapZone}\n        className={classNames.main}\n        elementToFocusOnDismiss={elementToFocusOnDismiss}\n        isClickableOutsideFocusTrap={isModeless || isClickableOutsideFocusTrap || !isBlocking}\n        ignoreExternalFocusing={ignoreExternalFocusing}\n        forceFocusInsideTrap={isModeless ? !isModeless : forceFocusInsideTrap}\n        firstFocusableSelector={firstFocusableSelector}\n        focusPreviouslyFocusedInnerElement={true}\n        onKeyDown={dragOptions ? this._onDialogKeyDown : undefined}\n        onKeyUp={dragOptions ? this._onDialogKeyUp : undefined}\n        onBlur={isInKeyboardMoveMode ? this._onExitKeyboardMoveMode : undefined}\n      >\n        {dragOptions && isInKeyboardMoveMode && (\n          <div className={classNames.keyboardMoveIconContainer}>\n            {dragOptions.keyboardMoveIconProps ? (\n              <Icon {...dragOptions.keyboardMoveIconProps} />\n            ) : (\n              <Icon iconName=\"move\" className={classNames.keyboardMoveIcon} />\n            )}\n          </div>\n        )}\n        <div ref={this._allowScrollOnModal} className={classNames.scrollableContent} data-is-scrollable={true}>\n          {dragOptions && this.state.isModalMenuOpen && (\n            <dragOptions.menu\n              items={[\n                { key: 'move', text: dragOptions.moveMenuItemText, onClick: this._onEnterKeyboardMoveMode },\n                { key: 'close', text: dragOptions.closeMenuItemText, onClick: this._onModalClose }\n              ]}\n              onDismiss={this._onModalContextMenuClose}\n              alignTargetEdge={true}\n              coverTarget={true}\n              directionalHint={DirectionalHint.topLeftEdge}\n              directionalHintFixed={true}\n              shouldFocusOnMount={true}\n              target={this._scrollableContent}\n            />\n          )}\n          {this.props.children}\n        </div>\n      </FocusTrapZone>\n    );\n\n    // @temp tuatology - Will adjust this to be a panel at certain breakpoints\n    if (responsiveMode! >= ResponsiveMode.small) {\n      return (\n        <Layer {...mergedLayerProps}>\n          <Popup\n            role={isModeless || !isBlocking ? 'dialog' : 'alertdialog'}\n            aria-modal={!isModeless}\n            ariaLabelledBy={titleAriaId}\n            ariaDescribedBy={subtitleAriaId}\n            onDismiss={onDismiss}\n          >\n            <div className={classNames.root}>\n              {!isModeless && <Overlay isDarkThemed={isDarkOverlay} onClick={isBlocking ? undefined : (onDismiss as any)} {...overlay} />}\n              {dragOptions ? (\n                <DraggableZone\n                  handleSelector={dragOptions.dragHandleSelector || `.${classNames.main.split(' ')[0]}`}\n                  preventDragSelector=\"button\"\n                  onStart={this._onDragStart}\n                  onDragChange={this._onDrag}\n                  onStop={this._onDragStop}\n                  position={{ x: x, y: y }}\n                >\n                  {modalContent}\n                </DraggableZone>\n              ) : (\n                modalContent\n              )}\n            </div>\n          </Popup>\n        </Layer>\n      );\n    }\n    return null;\n  }\n\n  public focus() {\n    if (this._focusTrapZone.current) {\n      this._focusTrapZone.current.focus();\n    }\n  }\n\n  // Allow the user to scroll within the modal but not on the body\n  private _allowScrollOnModal = (elt: HTMLDivElement | null): void => {\n    if (elt) {\n      allowScrollOnElement(elt, this._events);\n    } else {\n      this._events.off(this._scrollableContent);\n    }\n    this._scrollableContent = elt;\n  };\n\n  private _onModalContextMenuClose = (): void => {\n    this.setState({ isModalMenuOpen: false });\n  };\n\n  private _onModalClose = (): void => {\n    this._lastSetX = 0;\n    this._lastSetY = 0;\n\n    this.setState({\n      isModalMenuOpen: false,\n      isInKeyboardMoveMode: false,\n      isOpen: false,\n      x: 0,\n      y: 0\n    });\n\n    // Call the onDismiss callback\n    if (this.props.onDismissed) {\n      this.props.onDismissed();\n    }\n  };\n\n  private _onDragStart = (): void => {\n    this.setState({ isModalMenuOpen: false, isInKeyboardMoveMode: false });\n  };\n\n  private _onDrag = (_: React.MouseEvent<HTMLElement> & React.TouchEvent<HTMLElement>, ui: IDragData): void => {\n    const { x, y } = this.state;\n    this.setState({ x: x + ui.delta.x, y: y + ui.delta.y });\n  };\n\n  private _onDragStop = (): void => {\n    this.focus();\n  };\n\n  private _onDialogKeyUp = (event: React.KeyboardEvent<HTMLDivElement>): void => {\n    // Need to handle the CTRL + ALT + SPACE key during keyup due to FireFox bug:\n    // https://bugzilla.mozilla.org/show_bug.cgi?id=1220143\n    // Otherwise it would continue to fire a click even if the event was cancelled\n    // during mouseDown.\n    if (event.altKey && event.ctrlKey && event.keyCode === KeyCodes.space) {\n      this.setState({ isModalMenuOpen: !this.state.isModalMenuOpen });\n      event.preventDefault();\n      event.stopPropagation();\n    }\n  };\n\n  private _onDialogKeyDown = (event: React.KeyboardEvent<HTMLDivElement>): void => {\n    if (event.altKey && event.ctrlKey && event.keyCode === KeyCodes.space) {\n      // CTRL + ALT + SPACE is handled during keyUp\n      event.preventDefault();\n      event.stopPropagation();\n      return;\n    }\n\n    if (this.state.isModalMenuOpen && (event.altKey || event.keyCode === KeyCodes.escape)) {\n      this.setState({ isModalMenuOpen: false });\n    }\n\n    if (this.state.isInKeyboardMoveMode && (event.keyCode === KeyCodes.escape || event.keyCode === KeyCodes.enter)) {\n      this.setState({ isInKeyboardMoveMode: false });\n      event.preventDefault();\n      event.stopPropagation();\n    }\n\n    if (this.state.isInKeyboardMoveMode) {\n      let handledEvent = true;\n      const delta = this._getMoveDelta(event);\n\n      switch (event.keyCode) {\n        case KeyCodes.escape:\n          this.setState({ x: this._lastSetX, y: this._lastSetY });\n        case KeyCodes.enter: {\n          this._lastSetX = 0;\n          this._lastSetY = 0;\n          this.setState({ isInKeyboardMoveMode: false });\n          break;\n        }\n        case KeyCodes.up: {\n          this.setState({\n            y: this.state.y - delta\n          });\n          break;\n        }\n        case KeyCodes.down: {\n          this.setState({\n            y: this.state.y + delta\n          });\n          break;\n        }\n        case KeyCodes.left: {\n          this.setState({\n            x: this.state.x - delta\n          });\n          break;\n        }\n        case KeyCodes.right: {\n          this.setState({\n            x: this.state.x + delta\n          });\n          break;\n        }\n        default: {\n          handledEvent = false;\n        }\n      }\n\n      if (handledEvent) {\n        event.preventDefault();\n        event.stopPropagation();\n      }\n    }\n  };\n\n  private _getMoveDelta(event: React.KeyboardEvent<HTMLDivElement>): number {\n    let delta = 10;\n    if (event.shiftKey) {\n      if (!event.ctrlKey) {\n        delta = 50;\n      }\n    } else if (event.ctrlKey) {\n      delta = 1;\n    }\n\n    return delta;\n  }\n\n  private _onEnterKeyboardMoveMode = () => {\n    this._lastSetX = this.state.x;\n    this._lastSetY = this.state.y;\n    this.setState({ isInKeyboardMoveMode: true, isModalMenuOpen: false });\n  };\n\n  private _onExitKeyboardMoveMode = () => {\n    this._lastSetX = 0;\n    this._lastSetY = 0;\n    this.setState({ isInKeyboardMoveMode: false });\n  };\n}\n"]}