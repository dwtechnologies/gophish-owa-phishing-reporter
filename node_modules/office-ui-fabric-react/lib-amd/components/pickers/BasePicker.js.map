{"version":3,"file":"BasePicker.js","sourceRoot":"../src/","sources":["components/pickers/BasePicker.tsx"],"names":[],"mappings":"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","sourcesContent":["import * as React from 'react';\nimport { BaseComponent, KeyCodes, css, elementContains, getId, classNamesFunction, styled } from '../../Utilities';\nimport { IProcessedStyleSet } from '../../Styling';\nimport { IFocusZone, FocusZone, FocusZoneDirection } from '../../FocusZone';\nimport { Callout, DirectionalHint } from '../../Callout';\nimport { Selection, SelectionZone, SelectionMode } from '../../utilities/selection/index';\nimport { Suggestions } from './Suggestions/Suggestions';\nimport { ISuggestions, ISuggestionsProps, ISuggestionsStyleProps, ISuggestionsStyles } from './Suggestions/Suggestions.types';\nimport { getStyles as suggestionsStyles } from './Suggestions/Suggestions.styles';\nimport { SuggestionsController } from './Suggestions/SuggestionsController';\nimport { IBasePicker, IBasePickerProps, ValidationState, IBasePickerStyleProps, IBasePickerStyles } from './BasePicker.types';\nimport { IAutofill, Autofill } from '../Autofill/index';\nimport { IPickerItemProps } from './PickerItem.types';\nimport * as stylesImport from './BasePicker.scss';\nconst legacyStyles: any = stylesImport;\n\nexport interface IBasePickerState {\n  items?: any;\n  suggestedDisplayValue?: string;\n  moreSuggestionsAvailable?: boolean;\n  isFocused?: boolean;\n  isSearching?: boolean;\n  isMostRecentlyUsedVisible?: boolean;\n  suggestionsVisible?: boolean;\n  suggestionsLoading?: boolean;\n  isResultsFooterVisible?: boolean;\n  selectedIndices?: number[];\n}\n\n/**\n * Aria id's for internal picker components\n * {@docCategory Pickers}\n */\nexport type IPickerAriaIds = {\n  /**\n   * Aria id for selected suggestion alert component\n   */\n  selectedSuggestionAlert: string;\n  /**\n   * Aria id for selected items container component\n   */\n  selectedItems: string;\n  /**\n   * Aria id for suggestions list component\n   */\n  suggestionList: string;\n};\n\nconst getClassNames = classNamesFunction<IBasePickerStyleProps, IBasePickerStyles>();\n\n/**\n * Should be removed once new picker without inheritance is created\n */\nfunction getStyledSuggestions<T>(suggestionsType: new (props: ISuggestionsProps<T>) => Suggestions<T>) {\n  return styled<ISuggestionsProps<any>, ISuggestionsStyleProps, ISuggestionsStyles>(suggestionsType, suggestionsStyles, undefined, {\n    scope: 'Suggestions'\n  });\n}\n\n/**\n * {@docCategory Pickers}\n */\nexport class BasePicker<T, P extends IBasePickerProps<T>> extends BaseComponent<P, IBasePickerState> implements IBasePicker<T> {\n  // Refs\n  protected root = React.createRef<HTMLDivElement>();\n  protected input = React.createRef<IAutofill>();\n  protected focusZone = React.createRef<IFocusZone>();\n  protected suggestionElement = React.createRef<ISuggestions<T>>();\n\n  protected selection: Selection;\n  protected suggestionStore: SuggestionsController<T>;\n  /**\n   * @deprecated this is no longer necessary as typescript now supports generic elements\n   */\n  protected SuggestionOfProperType = Suggestions as new (props: ISuggestionsProps<T>) => Suggestions<T>;\n  protected currentPromise: PromiseLike<any> | undefined;\n  protected _ariaMap: IPickerAriaIds;\n  private _styledSuggestions = getStyledSuggestions(this.SuggestionOfProperType);\n  private _id: string;\n  private _requestSuggestionsOnClick = false;\n\n  constructor(basePickerProps: P) {\n    super(basePickerProps);\n\n    const items: T[] = basePickerProps.selectedItems || basePickerProps.defaultSelectedItems || [];\n\n    this._id = getId();\n    this._ariaMap = {\n      selectedItems: `selected-items-${this._id}`,\n      selectedSuggestionAlert: `selected-suggestion-alert-${this._id}`,\n      suggestionList: `suggestion-list-${this._id}`\n    };\n    this.suggestionStore = new SuggestionsController<T>();\n    this.selection = new Selection({ onSelectionChanged: () => this.onSelectionChange() });\n    this.selection.setItems(items);\n    this.state = {\n      items: items,\n      suggestedDisplayValue: '',\n      isMostRecentlyUsedVisible: false,\n      moreSuggestionsAvailable: false,\n      isFocused: false,\n      isSearching: false,\n      selectedIndices: []\n    };\n  }\n\n  public get items(): T[] {\n    return this.state.items;\n  }\n\n  // tslint:disable-next-line function-name\n  public UNSAFE_componentWillUpdate(newProps: P, newState: IBasePickerState): void {\n    if (newState.items && newState.items !== this.state.items) {\n      this.selection.setItems(newState.items);\n    }\n  }\n\n  public componentDidMount(): void {\n    this.selection.setItems(this.state.items);\n    this._onResolveSuggestions = this._async.debounce(this._onResolveSuggestions, this.props.resolveDelay);\n  }\n\n  // tslint:disable-next-line function-name\n  public UNSAFE_componentWillReceiveProps(newProps: P): void {\n    const newItems = newProps.selectedItems;\n\n    if (newItems) {\n      let focusIndex: number;\n\n      // If there are less new items than old items then something was removed and we\n      // should try to keep focus consistent\n      if (newItems.length < this.state.items.length) {\n        focusIndex = this.state.items.indexOf(this.selection.getSelection()[0]);\n      }\n\n      this.setState(\n        {\n          items: newProps.selectedItems\n        },\n        () => {\n          // Only update the focus if this component is currently focused to ensure that the basepicker\n          // doesn't steal focus from something else.\n          if (this.state.isFocused) {\n            // Need to reset focus in the same that way that we do if an item is selected by a non-controlled component\n            // See _onSelectedItemsUpdated.\n            this.resetFocus(focusIndex);\n          }\n        }\n      );\n    }\n  }\n\n  public componentWillUnmount(): void {\n    super.componentWillUnmount();\n    if (this.currentPromise) {\n      this.currentPromise = undefined;\n    }\n  }\n\n  public focus() {\n    if (this.focusZone.current) {\n      this.focusZone.current.focus();\n    }\n  }\n\n  public focusInput() {\n    if (this.input.current) {\n      this.input.current.focus();\n    }\n  }\n\n  public dismissSuggestions = (ev?: any): void => {\n    const selectItemFunction = () => {\n      if (this.props.onDismiss) {\n        this.props.onDismiss(ev, this.suggestionStore.currentSuggestion ? this.suggestionStore.currentSuggestion.item : undefined);\n      }\n\n      if (!ev || (ev && !ev.defaultPrevented)) {\n        // Select the first suggestion if one is available when user leaves.\n        if (this.canAddItems() && this.suggestionStore.hasSelectedSuggestion() && this.state.suggestedDisplayValue) {\n          this.addItemByIndex(0);\n        }\n      }\n    };\n\n    if (this.currentPromise) {\n      this.currentPromise.then(() => selectItemFunction());\n    } else {\n      selectItemFunction();\n    }\n\n    this._requestSuggestionsOnClick = false;\n    this.setState({ suggestionsVisible: false });\n  };\n\n  public completeSuggestion() {\n    if (this.suggestionStore.hasSelectedSuggestion() && this.input.current) {\n      this.addItem(this.suggestionStore.currentSuggestion!.item);\n      this.updateValue('');\n      this.input.current.clear();\n    }\n  }\n\n  public refocusSuggestions = (keyCode: KeyCodes): void => {\n    this.resetFocus();\n    if (this.suggestionStore.suggestions && this.suggestionStore.suggestions.length > 0) {\n      if (keyCode === KeyCodes.up) {\n        this.suggestionStore.setSelectedSuggestion(this.suggestionStore.suggestions.length - 1);\n      } else if (keyCode === KeyCodes.down) {\n        this.suggestionStore.setSelectedSuggestion(0);\n      }\n    }\n  };\n\n  public render(): JSX.Element {\n    const { suggestedDisplayValue, isFocused, items } = this.state;\n    const { className, inputProps, disabled, theme, styles } = this.props;\n\n    const selectedSuggestionAlertId = this.props.enableSelectedSuggestionAlert ? this._ariaMap.selectedSuggestionAlert : '';\n    const suggestionsAvailable = this.state.suggestionsVisible ? this._ariaMap.suggestionList : '';\n\n    // TODO\n    // Clean this up by leaving only the first part after removing support for SASS.\n    // Currently we can not remove the SASS styles from BasePicker class because it\n    // might be used by consumers who created custom pickers from extending from\n    // this base class and have not used the new 'styles' prop.\n    // We check for 'styles' prop which is going to be injected by the 'styled' HOC\n    // for every other already existing picker variant (PeoplePicker, TagPicker)\n    // so that we can use the CSS-in-JS styles. If the check fails (ex: custom picker),\n    // then we just use the old SASS styles instead.\n    const classNames: Partial<IProcessedStyleSet<IBasePickerStyles>> = styles\n      ? getClassNames(styles, {\n          theme,\n          className,\n          isFocused,\n          disabled,\n          inputClassName: inputProps && inputProps.className\n        })\n      : {\n          root: css('ms-BasePicker', className ? className : ''),\n          text: css('ms-BasePicker-text', legacyStyles.pickerText, this.state.isFocused && legacyStyles.inputFocused),\n          itemsWrapper: legacyStyles.pickerItems,\n          input: css('ms-BasePicker-input', legacyStyles.pickerInput, inputProps && inputProps.className),\n          screenReaderText: legacyStyles.screenReaderOnly\n        };\n\n    return (\n      <div ref={this.root} className={classNames.root} onKeyDown={this.onKeyDown} onBlur={this.onBlur}>\n        <FocusZone\n          componentRef={this.focusZone}\n          direction={FocusZoneDirection.bidirectional}\n          isInnerZoneKeystroke={this._isFocusZoneInnerKeystroke}\n        >\n          {this.getSuggestionsAlert(classNames.screenReaderText)}\n          <SelectionZone selection={this.selection} selectionMode={SelectionMode.multiple}>\n            <div className={classNames.text}>\n              {items.length > 0 && (\n                <span id={this._ariaMap.selectedItems} className={classNames.itemsWrapper} role={'list'}>\n                  {this.renderItems()}\n                </span>\n              )}\n              {this.canAddItems() && (\n                <Autofill\n                  spellCheck={false}\n                  {...inputProps as any}\n                  className={classNames.input}\n                  componentRef={this.input}\n                  onClick={this.onClick}\n                  onFocus={this.onInputFocus}\n                  onBlur={this.onInputBlur}\n                  onInputValueChange={this.onInputChange}\n                  suggestedDisplayValue={suggestedDisplayValue}\n                  aria-activedescendant={this.getActiveDescendant()}\n                  aria-expanded={!!this.state.suggestionsVisible}\n                  aria-haspopup=\"true\"\n                  aria-describedby={items.length > 0 ? this._ariaMap.selectedItems : undefined}\n                  autoCapitalize=\"off\"\n                  autoComplete=\"off\"\n                  role={'combobox'}\n                  disabled={disabled}\n                  aria-controls={`${suggestionsAvailable} ${selectedSuggestionAlertId}` || undefined}\n                  aria-owns={suggestionsAvailable || undefined}\n                  aria-autocomplete={'both'}\n                  onInputChange={this.props.onInputChange}\n                />\n              )}\n            </div>\n          </SelectionZone>\n        </FocusZone>\n        {this.renderSuggestions()}\n      </div>\n    );\n  }\n\n  protected canAddItems(): boolean {\n    const { items } = this.state;\n    const { itemLimit } = this.props;\n    return itemLimit === undefined || items.length < itemLimit;\n  }\n\n  protected renderSuggestions(): JSX.Element | null {\n    const StyledTypedSuggestions: React.StatelessComponent<ISuggestionsProps<T>> = this._styledSuggestions;\n\n    return this.state.suggestionsVisible && this.input ? (\n      <Callout\n        isBeakVisible={false}\n        gapSpace={5}\n        target={this.input.current ? this.input.current.inputElement : undefined}\n        onDismiss={this.dismissSuggestions}\n        directionalHint={DirectionalHint.bottomLeftEdge}\n        directionalHintForRTL={DirectionalHint.bottomRightEdge}\n        {...this.props.pickerCalloutProps}\n      >\n        <StyledTypedSuggestions\n          // Assumed to set in derived component's defaultProps\n          onRenderSuggestion={this.props.onRenderSuggestionsItem!}\n          onSuggestionClick={this.onSuggestionClick}\n          onSuggestionRemove={this.onSuggestionRemove}\n          suggestions={this.suggestionStore.getSuggestions()}\n          componentRef={this.suggestionElement}\n          onGetMoreResults={this.onGetMoreResults}\n          moreSuggestionsAvailable={this.state.moreSuggestionsAvailable}\n          isLoading={this.state.suggestionsLoading}\n          isSearching={this.state.isSearching}\n          isMostRecentlyUsedVisible={this.state.isMostRecentlyUsedVisible}\n          isResultsFooterVisible={this.state.isResultsFooterVisible}\n          refocusSuggestions={this.refocusSuggestions}\n          removeSuggestionAriaLabel={this.props.removeButtonAriaLabel}\n          suggestionsListId={this._ariaMap.suggestionList}\n          {...this.props.pickerSuggestionsProps}\n        />\n      </Callout>\n    ) : null;\n  }\n\n  protected renderItems(): JSX.Element[] {\n    const { disabled, removeButtonAriaLabel } = this.props;\n    const onRenderItem = this.props.onRenderItem as (props: IPickerItemProps<T>) => JSX.Element;\n\n    const { items, selectedIndices } = this.state;\n    return items.map((item: any, index: number) =>\n      onRenderItem({\n        item,\n        index,\n        key: item.key ? item.key : index,\n        selected: selectedIndices!.indexOf(index) !== -1,\n        onRemoveItem: () => this.removeItem(item, true),\n        disabled: disabled,\n        onItemChange: this.onItemChange,\n        removeButtonAriaLabel: removeButtonAriaLabel\n      })\n    );\n  }\n\n  protected resetFocus(index?: number) {\n    const { items } = this.state;\n\n    if (items.length && index! >= 0) {\n      const newEl: HTMLElement | null =\n        this.root.current &&\n        (this.root.current.querySelectorAll('[data-selection-index]')[Math.min(index!, items.length - 1)] as HTMLElement | null);\n      if (newEl && this.focusZone.current) {\n        this.focusZone.current.focusElement(newEl);\n      }\n    } else if (!this.canAddItems()) {\n      this.resetFocus(items.length - 1);\n    } else {\n      if (this.input.current) {\n        this.input.current.focus();\n      }\n    }\n  }\n\n  protected onSuggestionSelect() {\n    if (this.suggestionStore.currentSuggestion) {\n      const currentValue: string = this.input.current ? this.input.current.value : '';\n      const itemValue: string = this._getTextFromItem(this.suggestionStore.currentSuggestion.item, currentValue);\n      this.setState({ suggestedDisplayValue: itemValue });\n    }\n  }\n\n  protected onSelectionChange() {\n    this.setState({\n      selectedIndices: this.selection.getSelectedIndices()\n    });\n  }\n\n  protected updateSuggestions(suggestions: any[]) {\n    this.suggestionStore.updateSuggestions(suggestions, 0);\n    this.forceUpdate();\n  }\n\n  protected onEmptyInputFocus() {\n    const emptyResolveSuggestions = this.props.onEmptyResolveSuggestions\n      ? this.props.onEmptyResolveSuggestions\n      : this.props.onEmptyInputFocus;\n\n    const suggestions = emptyResolveSuggestions!(this.state.items);\n    this.updateSuggestionsList(suggestions);\n  }\n\n  protected updateValue(updatedValue: string) {\n    this._onResolveSuggestions(updatedValue);\n  }\n\n  protected updateSuggestionsList(suggestions: T[] | PromiseLike<T[]>, updatedValue?: string) {\n    const suggestionsArray: T[] = suggestions as T[];\n    const suggestionsPromiseLike: PromiseLike<T[]> = suggestions as PromiseLike<T[]>;\n\n    // Check to see if the returned value is an array, if it is then just pass it into the next function .\n    // If the returned value is not an array then check to see if it's a promise or PromiseLike. If it is then resolve it asynchronously.\n    if (Array.isArray(suggestionsArray)) {\n      this._updateAndResolveValue(updatedValue, suggestionsArray);\n    } else if (suggestionsPromiseLike && suggestionsPromiseLike.then) {\n      this.setState({\n        suggestionsLoading: true\n      });\n\n      // Clear suggestions\n      this.suggestionStore.updateSuggestions([]);\n\n      if (updatedValue !== undefined) {\n        this.setState({\n          suggestionsVisible: this._getShowSuggestions()\n        });\n      } else {\n        this.setState({\n          suggestionsVisible: this.input.current! && this.input.current!.inputElement === document.activeElement\n        });\n      }\n\n      // Ensure that the promise will only use the callback if it was the most recent one.\n      const promise: PromiseLike<T[]> = (this.currentPromise = suggestionsPromiseLike);\n      promise.then((newSuggestions: T[]) => {\n        if (promise === this.currentPromise) {\n          this._updateAndResolveValue(updatedValue, newSuggestions);\n        }\n      });\n    }\n  }\n\n  protected resolveNewValue(updatedValue: string, suggestions: T[]) {\n    this.updateSuggestions(suggestions);\n    let itemValue: string | undefined = undefined;\n\n    if (this.suggestionStore.currentSuggestion) {\n      itemValue = this._getTextFromItem(this.suggestionStore.currentSuggestion.item, updatedValue);\n    }\n\n    // Only set suggestionloading to false after there has been time for the new suggestions to flow\n    // to the suggestions list. This is to ensure that the suggestions are available before aria-activedescendant\n    // is set so that screen readers will read out the first selected option.\n    this.setState(\n      {\n        suggestedDisplayValue: itemValue,\n        suggestionsVisible: this._getShowSuggestions()\n      },\n      () => this.setState({ suggestionsLoading: false })\n    );\n  }\n\n  protected onChange(items?: T[]) {\n    if (this.props.onChange) {\n      (this.props.onChange as any)(items);\n    }\n  }\n\n  protected onInputChange = (value: string): void => {\n    this.updateValue(value);\n    this.setState({\n      moreSuggestionsAvailable: true,\n      isMostRecentlyUsedVisible: false\n    });\n  };\n\n  protected onSuggestionClick = (ev: React.MouseEvent<HTMLElement>, item: any, index: number): void => {\n    this.addItemByIndex(index);\n    this._requestSuggestionsOnClick = false;\n    this.setState({ suggestionsVisible: false });\n  };\n\n  protected onSuggestionRemove = (ev: React.MouseEvent<HTMLElement>, item: T, index: number): void => {\n    if (this.props.onRemoveSuggestion) {\n      this.props.onRemoveSuggestion(item);\n    }\n    this.suggestionStore.removeSuggestion(index);\n  };\n\n  protected onInputFocus = (ev: React.FocusEvent<HTMLInputElement | Autofill>): void => {\n    // Only trigger all of the focus if this component isn't already focused.\n    // For example when an item is selected or removed from the selected list it should be treated\n    // as though the input is still focused.\n    if (!this.state.isFocused) {\n      this.setState({ isFocused: true });\n      this.selection.setAllSelected(false);\n\n      if (\n        this.input.current &&\n        this.input.current.value === '' &&\n        (this.props.onEmptyResolveSuggestions || this.props.onEmptyInputFocus) &&\n        !this._requestSuggestionsOnClick\n      ) {\n        this.onEmptyInputFocus();\n        this.setState({\n          isMostRecentlyUsedVisible: true,\n          moreSuggestionsAvailable: false,\n          suggestionsVisible: true\n        });\n      } else if (this.input.current && this.input.current.value && !this._requestSuggestionsOnClick) {\n        this.setState({\n          isMostRecentlyUsedVisible: false,\n          suggestionsVisible: true\n        });\n      }\n      if (this.props.inputProps && this.props.inputProps.onFocus) {\n        this.props.inputProps.onFocus(ev as React.FocusEvent<HTMLInputElement>);\n      }\n    }\n  };\n\n  protected onInputBlur = (ev: React.FocusEvent<HTMLInputElement | Autofill>): void => {\n    if (this.props.inputProps && this.props.inputProps.onBlur) {\n      this.props.inputProps.onBlur(ev as React.FocusEvent<HTMLInputElement>);\n    }\n  };\n\n  protected onBlur = (ev: React.FocusEvent<HTMLElement | Autofill>): void => {\n    if (this.state.isFocused) {\n      // Only blur the entire component if an unrelated element gets focus. Otherwise treat it as though it still has focus.\n      // Do nothing if the blur is coming from something\n      // inside the comboBox root or the comboBox menu since\n      // it we are not really bluring from the whole comboBox\n      let relatedTarget: EventTarget | null = ev.relatedTarget;\n\n      if (ev.relatedTarget === null) {\n        // In IE11, due to lack of support, event.relatedTarget is always\n        // null making every onBlur call to be \"outside\" of the ComboBox\n        // even when it's not. Using document.activeElement is another way\n        // for us to be able to get what the relatedTarget without relying\n        // on the event\n        relatedTarget = document.activeElement;\n      }\n      if (relatedTarget && !elementContains(this.root.current!, relatedTarget as HTMLElement)) {\n        this.setState({ isFocused: false });\n        if (this.props.onBlur) {\n          this.props.onBlur(ev as React.FocusEvent<HTMLInputElement>);\n        }\n      }\n    }\n  };\n\n  /**\n   * Reveals suggestions any time the user clicks on the input element\n   * without shifting focus.\n   */\n  protected onClick = (ev: React.MouseEvent<HTMLInputElement>): void => {\n    const input = this.input.current ? this.input.current.value : '';\n\n    if (this.props.inputProps !== undefined && this.props.inputProps.onClick !== undefined) {\n      this.props.inputProps.onClick(ev);\n    }\n\n    // Only primary (left) clicks show suggestions.\n    if (ev.button === 0 && !this.state.suggestionsVisible) {\n      const emptyResolveSuggestions = this.props.onEmptyResolveSuggestions\n        ? this.props.onEmptyResolveSuggestions\n        : this.props.onEmptyInputFocus;\n\n      if (input === '' && emptyResolveSuggestions) {\n        this.setState({ suggestionsVisible: true });\n        const suggestions = emptyResolveSuggestions!(this.state.items);\n        this.updateSuggestionsList(suggestions);\n      } else {\n        this._requestSuggestionsOnClick = true;\n        this._onResolveSuggestions(input);\n      }\n    }\n  };\n\n  protected onKeyDown = (ev: React.KeyboardEvent<HTMLElement>): void => {\n    const keyCode = ev.which;\n    switch (keyCode) {\n      case KeyCodes.escape:\n        if (this.state.suggestionsVisible) {\n          this._requestSuggestionsOnClick = false;\n          this.setState({ suggestionsVisible: false });\n          ev.preventDefault();\n          ev.stopPropagation();\n        }\n        break;\n\n      case KeyCodes.tab:\n      case KeyCodes.enter:\n        if (this.suggestionElement.current && this.suggestionElement.current.hasSuggestedActionSelected()) {\n          this.suggestionElement.current.executeSelectedAction();\n        } else if (!ev.shiftKey && this.suggestionStore.hasSelectedSuggestion() && this.state.suggestionsVisible) {\n          this.completeSuggestion();\n          ev.preventDefault();\n          ev.stopPropagation();\n        } else {\n          this._onValidateInput();\n        }\n\n        break;\n\n      case KeyCodes.backspace:\n        if (!this.props.disabled) {\n          this.onBackspace(ev);\n        }\n        ev.stopPropagation();\n        break;\n\n      case KeyCodes.del:\n        if (!this.props.disabled) {\n          if (\n            this.input.current &&\n            ev.target === this.input.current.inputElement &&\n            this.state.suggestionsVisible &&\n            this.suggestionStore.currentIndex !== -1\n          ) {\n            if (this.props.onRemoveSuggestion) {\n              this.props.onRemoveSuggestion(this.suggestionStore.currentSuggestion!.item);\n            }\n            this.suggestionStore.removeSuggestion(this.suggestionStore.currentIndex);\n            this.forceUpdate();\n          } else {\n            this.onBackspace(ev);\n          }\n        }\n        ev.stopPropagation();\n        break;\n\n      case KeyCodes.up:\n        if (this.input.current && ev.target === this.input.current.inputElement && this.state.suggestionsVisible) {\n          if (\n            this.suggestionElement.current &&\n            this.suggestionElement.current.tryHandleKeyDown(keyCode, this.suggestionStore.currentIndex)\n          ) {\n            ev.preventDefault();\n            ev.stopPropagation();\n          } else {\n            if (\n              this.suggestionElement.current &&\n              this.suggestionElement.current.hasSuggestedAction() &&\n              this.suggestionStore.currentIndex === 0\n            ) {\n              ev.preventDefault();\n              ev.stopPropagation();\n              this.suggestionElement.current.focusAboveSuggestions();\n              this.suggestionStore.deselectAllSuggestions();\n              this.forceUpdate();\n            } else {\n              if (this.suggestionStore.previousSuggestion()) {\n                ev.preventDefault();\n                ev.stopPropagation();\n                this.onSuggestionSelect();\n              }\n            }\n          }\n        }\n        break;\n\n      case KeyCodes.down:\n        if (this.input.current && ev.target === this.input.current.inputElement && this.state.suggestionsVisible) {\n          if (\n            this.suggestionElement.current &&\n            this.suggestionElement.current.tryHandleKeyDown(keyCode, this.suggestionStore.currentIndex)\n          ) {\n            ev.preventDefault();\n            ev.stopPropagation();\n          } else {\n            if (\n              this.suggestionElement.current &&\n              this.suggestionElement.current.hasSuggestedAction() &&\n              this.suggestionStore.currentIndex + 1 === this.suggestionStore.suggestions.length\n            ) {\n              ev.preventDefault();\n              ev.stopPropagation();\n              this.suggestionElement.current.focusBelowSuggestions();\n              this.suggestionStore.deselectAllSuggestions();\n              this.forceUpdate();\n            } else {\n              if (this.suggestionStore.nextSuggestion()) {\n                ev.preventDefault();\n                ev.stopPropagation();\n                this.onSuggestionSelect();\n              }\n            }\n          }\n        }\n        break;\n    }\n  };\n\n  protected onItemChange = (changedItem: T, index: number): void => {\n    const { items } = this.state;\n\n    if (index >= 0) {\n      const newItems: T[] = items;\n      newItems[index] = changedItem;\n\n      this._updateSelectedItems(newItems);\n    }\n  };\n\n  protected onGetMoreResults = (): void => {\n    this.setState(\n      {\n        isSearching: true\n      },\n      () => {\n        if (this.props.onGetMoreResults && this.input.current) {\n          const suggestions: T[] | PromiseLike<T[]> = (this.props.onGetMoreResults as any)(this.input.current.value, this.state.items);\n          const suggestionsArray: T[] = suggestions as T[];\n          const suggestionsPromiseLike: PromiseLike<T[]> = suggestions as PromiseLike<T[]>;\n\n          if (Array.isArray(suggestionsArray)) {\n            this.updateSuggestions(suggestionsArray);\n            this.setState({ isSearching: false });\n          } else if (suggestionsPromiseLike.then) {\n            suggestionsPromiseLike.then((newSuggestions: T[]) => {\n              this.updateSuggestions(newSuggestions);\n              this.setState({ isSearching: false });\n            });\n          }\n        } else {\n          this.setState({ isSearching: false });\n        }\n\n        if (this.input.current) {\n          this.input.current.focus();\n        }\n\n        this.setState({\n          moreSuggestionsAvailable: false,\n          isResultsFooterVisible: true\n        });\n      }\n    );\n  };\n\n  protected addItemByIndex = (index: number): void => {\n    this.addItem(this.suggestionStore.getSuggestionAtIndex(index).item);\n    if (this.input.current) {\n      this.input.current.clear();\n    }\n    this.updateValue('');\n  };\n\n  protected addItem = (item: T): void => {\n    const processedItem: T | PromiseLike<T> | null = this.props.onItemSelected ? (this.props.onItemSelected as any)(item) : item;\n\n    if (processedItem === null) {\n      return;\n    }\n\n    const processedItemObject: T = processedItem as T;\n    const processedItemPromiseLike: PromiseLike<T> = processedItem as PromiseLike<T>;\n\n    if (processedItemPromiseLike && processedItemPromiseLike.then) {\n      processedItemPromiseLike.then((resolvedProcessedItem: T) => {\n        const newItems: T[] = this.state.items.concat([resolvedProcessedItem]);\n        this._updateSelectedItems(newItems);\n      });\n    } else {\n      const newItems: T[] = this.state.items.concat([processedItemObject]);\n      this._updateSelectedItems(newItems);\n    }\n    this.setState({ suggestedDisplayValue: '' });\n  };\n\n  protected removeItem = (item: IPickerItemProps<T>, focusNextItem?: boolean): void => {\n    const { items } = this.state;\n    const index: number = items.indexOf(item);\n\n    if (index >= 0) {\n      const newItems: T[] = items.slice(0, index).concat(items.slice(index + 1));\n      this._updateSelectedItems(newItems, focusNextItem ? index : undefined);\n    }\n  };\n\n  protected removeItems = (itemsToRemove: any[]): void => {\n    const { items } = this.state;\n    const newItems: T[] = items.filter((item: any) => itemsToRemove.indexOf(item) === -1);\n    const firstItemToRemove = itemsToRemove[0];\n    const index: number = items.indexOf(firstItemToRemove);\n\n    this._updateSelectedItems(newItems, index);\n  };\n\n  // This is protected because we may expect the backspace key to work differently in a different kind of picker.\n  // This lets the subclass override it and provide it's own onBackspace. For an example see the BasePickerListBelow\n  protected onBackspace(ev: React.KeyboardEvent<HTMLElement>) {\n    if (\n      (this.state.items.length && !this.input.current) ||\n      (this.input.current && (!this.input.current.isValueSelected && this.input.current.cursorLocation === 0))\n    ) {\n      if (this.selection.getSelectedCount() > 0) {\n        this.removeItems(this.selection.getSelection());\n      } else {\n        this.removeItem(this.state.items[this.state.items.length - 1]);\n      }\n    }\n  }\n\n  protected _isFocusZoneInnerKeystroke = (ev: React.KeyboardEvent<HTMLElement>): boolean => {\n    // If suggestions are shown const up/down keys control them, otherwise allow them through to control the focusZone.\n    if (this.state.suggestionsVisible) {\n      switch (ev.which) {\n        case KeyCodes.up:\n        case KeyCodes.down:\n          return true;\n      }\n    }\n\n    if (ev.which === KeyCodes.enter) {\n      return true;\n    }\n\n    return false;\n  };\n\n  protected getActiveDescendant() {\n    const currentIndex = this.suggestionStore.currentIndex;\n    return currentIndex > -1 && !this.state.suggestionsLoading ? 'sug-' + currentIndex : undefined;\n  }\n\n  protected getSuggestionsAlert(suggestionAlertClassName: string = legacyStyles.screenReaderOnly) {\n    const currentIndex = this.suggestionStore.currentIndex;\n    if (this.props.enableSelectedSuggestionAlert) {\n      const selectedSuggestion =\n        currentIndex > -1 ? this.suggestionStore.getSuggestionAtIndex(this.suggestionStore.currentIndex) : undefined;\n      const selectedSuggestionAlertText = selectedSuggestion ? selectedSuggestion.ariaLabel : undefined;\n      return (\n        <div className={suggestionAlertClassName} role=\"alert\" id={this._ariaMap.selectedSuggestionAlert} aria-live=\"assertive\">\n          {selectedSuggestionAlertText}{' '}\n        </div>\n      );\n    }\n  }\n\n  /**\n   * Takes in the current updated value and either resolves it with the new suggestions\n   * or if updated value is undefined then it clears out currently suggested items\n   */\n  private _updateAndResolveValue(updatedValue: string | undefined, newSuggestions: T[]) {\n    if (updatedValue !== undefined) {\n      this.resolveNewValue(updatedValue, newSuggestions);\n    } else {\n      this.suggestionStore.updateSuggestions(newSuggestions, -1);\n      if (this.state.suggestionsLoading) {\n        this.setState({\n          suggestionsLoading: false\n        });\n      }\n    }\n  }\n\n  /**\n   * Controls what happens whenever there is an action that impacts the selected items.\n   * If selectedItems is provided as a property then this will act as a controlled component and it will not update it's own state.\n   */\n  private _updateSelectedItems(items: T[], focusIndex?: number): void {\n    if (this.props.selectedItems) {\n      // If the component is a controlled component then the controlling component will need to add or remove the items.\n      this.onChange(items);\n    } else {\n      this.setState({ items: items }, () => {\n        this._onSelectedItemsUpdated(items, focusIndex);\n      });\n    }\n  }\n\n  private _onSelectedItemsUpdated(items?: T[], focusIndex?: number): void {\n    this.resetFocus(focusIndex);\n    this.onChange(items);\n  }\n\n  /**\n   * Suggestions are normally shown after the user updates text and the text\n   * is non-empty, but also when the user clicks on the input element.\n   * @returns True if suggestions should be shown.\n   */\n  private _getShowSuggestions(): boolean {\n    const areSuggestionsVisible =\n      this.input.current !== undefined &&\n      this.input.current !== null &&\n      this.input.current.inputElement === document.activeElement &&\n      (this.input.current.value !== '' || this._requestSuggestionsOnClick);\n\n    return areSuggestionsVisible;\n  }\n\n  private _onResolveSuggestions(updatedValue: string): void {\n    const suggestions: T[] | PromiseLike<T[]> | null = this.props.onResolveSuggestions(updatedValue, this.state.items);\n\n    if (suggestions !== null) {\n      this.updateSuggestionsList(suggestions, updatedValue);\n    }\n  }\n\n  private _onValidateInput(): void {\n    if (\n      this.props.onValidateInput &&\n      this.input.current &&\n      (this.props.onValidateInput as any)(this.input.current.value) !== ValidationState.invalid &&\n      this.props.createGenericItem\n    ) {\n      const itemToConvert = this.props.createGenericItem(this.input.current.value, this.props.onValidateInput(this.input.current.value));\n      this.suggestionStore.createGenericSuggestion(itemToConvert);\n      this.completeSuggestion();\n    }\n  }\n\n  private _getTextFromItem(item: T, currentValue?: string): string {\n    if (this.props.getTextFromItem) {\n      return (this.props.getTextFromItem as any)(item, currentValue);\n    } else {\n      return '';\n    }\n  }\n}\n\nexport class BasePickerListBelow<T, P extends IBasePickerProps<T>> extends BasePicker<T, P> {\n  public render(): JSX.Element {\n    const { suggestedDisplayValue, isFocused } = this.state;\n    const { className, inputProps, disabled, theme, styles } = this.props;\n\n    const selectedSuggestionAlertId: string | undefined = this.props.enableSelectedSuggestionAlert\n      ? this._ariaMap.selectedSuggestionAlert\n      : '';\n    const suggestionsAvailable: string | undefined = this.state.suggestionsVisible ? this._ariaMap.suggestionList : '';\n\n    // TODO\n    // Clean this up by leaving only the first part after removing support for SASS.\n    // Currently we can not remove the SASS styles from BasePicker class because it\n    // might be used by consumers who created custom pickers from extending from\n    // this base class and have not used the new 'styles' prop.\n    // We check for 'styles' prop which is going to be injected by the 'styled' HOC\n    // for every other already existing picker variant (PeoplePicker, TagPicker)\n    // so that we can use the CSS-in-JS styles. If the check fails (ex: custom picker),\n    // then we just use the old SASS styles instead.\n    const classNames: Partial<IProcessedStyleSet<IBasePickerStyles>> = styles\n      ? getClassNames(styles, {\n          theme,\n          className,\n          isFocused,\n          inputClassName: inputProps && inputProps.className\n        })\n      : {\n          root: css('ms-BasePicker', className ? className : ''),\n          text: css('ms-BasePicker-text', legacyStyles.pickerText, this.state.isFocused && legacyStyles.inputFocused),\n          input: css('ms-BasePicker-input', legacyStyles.pickerInput, inputProps && inputProps.className),\n          screenReaderText: legacyStyles.screenReaderOnly\n        };\n\n    return (\n      <div ref={this.root} onBlur={this.onBlur}>\n        <div className={classNames.root} onKeyDown={this.onKeyDown}>\n          {this.getSuggestionsAlert(classNames.screenReaderText)}\n          <div className={classNames.text}>\n            <Autofill\n              {...inputProps as any}\n              className={classNames.input}\n              componentRef={this.input}\n              onFocus={this.onInputFocus}\n              onBlur={this.onInputBlur}\n              onClick={this.onClick}\n              onInputValueChange={this.onInputChange}\n              suggestedDisplayValue={suggestedDisplayValue}\n              aria-activedescendant={this.getActiveDescendant()}\n              aria-expanded={!!this.state.suggestionsVisible}\n              aria-haspopup=\"true\"\n              autoCapitalize=\"off\"\n              autoComplete=\"off\"\n              role=\"combobox\"\n              disabled={disabled}\n              aria-controls={`${suggestionsAvailable} ${selectedSuggestionAlertId}` || undefined}\n              aria-owns={suggestionsAvailable || undefined}\n              onInputChange={this.props.onInputChange}\n            />\n          </div>\n        </div>\n        {this.renderSuggestions()}\n        <SelectionZone selection={this.selection} selectionMode={SelectionMode.single}>\n          <FocusZone\n            componentRef={this.focusZone}\n            className=\"ms-BasePicker-selectedItems\" // just a className hook without any styles applied to it.\n            isCircularNavigation={true}\n            direction={FocusZoneDirection.bidirectional}\n            isInnerZoneKeystroke={this._isFocusZoneInnerKeystroke}\n            id={this._ariaMap.selectedItems}\n          >\n            {this.renderItems()}\n          </FocusZone>\n        </SelectionZone>\n      </div>\n    );\n  }\n\n  protected onBackspace(ev: React.KeyboardEvent<HTMLElement>) {\n    // override the existing backspace method to not do anything because the list items appear below.\n  }\n}\n"]}